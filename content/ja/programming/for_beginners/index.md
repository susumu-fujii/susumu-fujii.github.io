---
title: 'What is programming?'
date: '2024-04-01'
private: true
summary: 'プログラミングとは'
image:
  caption: 
  focal_point: ''
  placement: 1
  preview_only: true
---

{{% callout warning %}}
基本的に何も見ずに書いてますので、間違った知識とかあるかもしれません。すまん。
プログラムにバグは常につきものなので、人からプログラムをもらったら必ず読んで、検算するなりしたほうがいいです（少なくとも、その努力をする）。
{{% /callout %}}

### はじめに
基本的にコンピューターはアホです。
例えば「１」という数字を見た時、人間は「整数の１やな」と思いますが、コンピューターは「文字列か、整数か、実数か分からへん、とりあえずエラー出しといたろ！」となります。
ただし、明確な指示を与えればめちゃくちゃ早く仕事を終えます。
人間の指示が間違っていない限り、数値誤差を無視すれば基本的にミスをしません。
人間の単純ミスによるやり直しの時間も考えれば、プログラミングを使える人と使えない人だと１００倍以上仕事量の差が出てもおかしくないです。

結果として色んな良いことが起きます。

- 計算が回っている間は遊べる
- やる気があれば、計算が回っている間に別の研究ができる
- 計算量が多いと、研究のステージ自体が変わる（一般的傾向をみる、物質探索をする、など）

ただし人間の頭は一つなので研究を律速するのは考察する時間になります。
データが多いと結果の解釈が面倒（というか無理）なので、データ科学を使ったりするわけです。

基本的にプログラミングというのは、論理パズルです。
一つ一つのコマンドを組み合わせて、目的を果たすプログラム作ります。
レゴみたいなもんです。
既にあるパーツを組み合わせて、何かしら自分の作りたいものを表現します。

<br>
{{< spoiler text="bashとVASPが分かる人だけクリックして読んでね。">}}

例えば、以下のbash上のコマンドも、十分プログラミングです。
あるフォルダの中に第一原理計算の結果が100個ぐらいあるとして、そのエネルギーを全部知りたいとします。
一個一個結果を見るのはめんどいので、以下を実行します。

```bash
find ./ -name "OUTCAR" | xargs -n 1 -I {} sh -c "grep 'energy  without' {} |tail -n 1"  | awk '{print $7}'
```

コマンドの意味は下記の通り。

 |コマンド | 意味 |
 | - | - |
 |find ./ -name "OUTCAR" | 現在のディレクトリからOUTCAR（結果が書いてあるファイル）を探してくる|
 | \|（パイプ）| 結果を次のコマンドに渡す|
 |xargs -n 1 -I {} | {}の位置にfindの結果を一個ずつ渡して、逐次コマンドを実行する|
 |sh -c "grep 'energy  without' {}| findで探してきたファイルから"energy  without"と書かれた行を抜き出す|
 |tail -n 1"|その結果の最終行だけそれぞれ取り出す|
 | awk '{print $7}'|一文をスペース・タブで区切って、７個目のやつを取り出す。|

周りの人はスラスラとこういうコマンドを実行するかと思いますが、findとかgrepとかxargsとか、頭の中にあるパーツを使って論理パズルを組み立てています。

{{< /spoiler >}}
<br>

ちなみに、いろんなコマンドを覚えている人が偉いと思うかもしれませんが、そうではないです。
基本的なやつ以外覚えんでいいし、分からんくなったらネットで調べたらすぐ出てきます。
プログラミングで鍛えるべきはパーツをどう組み合わせたら目的が果たせるか、つまり論理的な思考力です。
<br><br>

### プログラミング言語について

僕は基本的に二種類の言語しか書けません。

- python
- C++

なのであんまりどの言語が良いとか知らないです。
その辺のプログラミングオタクの人に聞いてください。
C言語やperlなども触っていましたが、書くのがめんどいので今は使っていません。

pythonとC++で何がちゃうねんという話ですが、ざっくり言うと

- どれだけ厳密に書く必要があるか
- どれだけ便利な機能が用意されているか
- 計算速度
- コンパイルが必要か

です。それぞれ以下で説明します。
<br><br>

### どれだけ厳密に書く必要があるか
例えばpythonは「a=1」という指令を見ると、「あ、aは多分整数やな。聞いてないけど整数にしといたろ！」となります。
C++は、「文字列か、整数か、実数か分からへん、とりあえずエラー出しといたろ！」となります。
C++の方では、「int a = 1;」と書いて、あらかじめaが整数（int）であることを教えないといけません。
前者の方が柔軟で賢そうに見えますし、実際書くのは楽です。
ただし、「本当は実数として扱ってほしかったんやけど。。。」とエラーや計算間違いの原因にもなりえます（まあこの場合は人間がアホです）。

### どれだけ便利な機能が用意されているか
pythonには先人が築き上げてきた多数のライブラリがあります。
ライブラリというのは、よく使う機能を人まとめしたものです。
例えば車を作る際に、どの車でもエンジンが必要だと思いますが、そういったパーツのライブラリが既にあれば、一からエンジンを設計せずに皆が簡単に車を作れる訳です。
pythonにはpymatgenやmatminer、scipyなど、計算科学やデータ科学のライブラリが多いです。
これらを使えば、例えば第一原理計算の計算結果から４元系状態図が10行ぐらいのプログラムで描けます。
図を書くプログラムもmatplotlibなどを使って書いてしまえば、エクセルみたいに一々手で作らなくてもコマンド一発でエクセルの数倍きれいな図が書けます。
C++も便利なライブラリはありますが（boostとか）、pythonには及ばないです。

### 計算速度
C++はpythonに比べて計算がクソ速いです。
赤ちゃんとウサインボルトくらいの差があります。マジで。
なので、計算量が多いプログラムはC++で書かなければ仕事になりません。
逆に、状態図を書くことなど、処理は複雑ですが計算量がそんなに多くないものは、python
で書いた方が楽です。
基本pythonで書いて、計算が多いところだけC++で実行することも出来ます（ちょっとむずい）。

### コンパイルが必要か
C++ではプログラミング言語を機械が理解して実行するための翻訳作業（コンパイル）が必要です。
事前にコンピューターへの指示を明確に作り上げているから早くなります。
pythonは実行のたびにプログラミング言語を読みながら勝手に翻訳します。
いちいち翻訳作業をしないでいいし、柔軟で書くのも楽ですが、その分機械の方で手間がかかって遅いです。

要するに、書きやすさと計算の速さはあまり両立しません。
僕の場合、書きやすさが欲しければpython、計算速度が欲しければC++を使います。
pythonじゃないと書けないぐらい複雑だし、計算速度も欲しいんや！というわがままな子は、一部のパーツだけC++で書いて、それをpythonから呼び出してください。
（ちなみにC言語などはC++よりも厳密な書き方が要求されるので、機械の気持ちに寄り添いたければ学習したら良いです。僕はいや。）

